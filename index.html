<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="docsify-tabs - A docsify.js plugin for rendering tabbed content from markdown.">
    <title>CLIForms</title>

    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/vue.css"> -->
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/buble.css"> -->
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/dark.css"> -->
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/pure.css"> -->
    <link rel="stylesheet" href="https://unpkg.com/docsify-themeable/dist/css/theme-simple.css" title="Simple">
    <style>
        .expandProperties {
            cursor: pointer;
        }

        table.autoDocsTable {
            width: 100%;
            display: table;
        }

        table.autoDocsTable td:first-child,
        table.autoDocsTable th:first-child {
            width: 10px;
        }

        table.autoDocsTable td:last-child,
        table.autoDocsTable th:last-child {
            width: 25%;
        }
    </style>
</head>

<body>
    <div id="app"></div>

    <!-- JavaScript -->
    <script>
        window.$docsify = {
            // GENERAL
            // -----------------------------------------------------------------
            name: 'docsify-tabs',
            homepage: 'index.md',
            loadSidebar: '_sidebar.md',

            // NAVIGATION
            // -----------------------------------------------------------------

            auto2top: true,
            maxLevel: 3,
            subMaxLevel: 3,

            // PLUGINS
            // -----------------------------------------------------------------
            executeScript: true,
            search: {
                depth: 3,
                noData: 'No results!',
                placeholder: 'Search...'
            },
            tabs: {
                // persist    : false,
                // sync       : false,
                // theme      : 'material',
                // tabComments: false,
                // tabHeadings: false
            }
        };
    </script>
    <script>


        (function () {
            "use strict";

            function getAllMatches(regex, text) {
                var res = [];
                text.replace(regex, function () {
                    var matches = arguments;
                    res.push(matches);
                });

                return res;
            }

            function getByTagName(parent, tagName) {
                var c = parent.childNodes;
                var x = [];
                for (var i = 0; i < c.length; i++) {
                    if (c[i].tagName === tagName) { // children_tag_name should be in capital, eg. "SPAN"
                        x.push(c[i]);
                    }
                };
                return x;
            }

            function getTagText(parent, tagName) {
                var childNodes = getByTagName(parent, tagName)[0].childNodes;
                if (childNodes.length == 0) {
                    return null;
                }
                else if (childNodes.length == 1) {
                    return childNodes[0].textContent;
                }
                else // CDATA
                {
                    return childNodes[1].textContent;
                }

            }

            var newLine = "\r\n";
            var doubleNewLine = newLine + newLine;

            function getFlattenInheritance(obj) {
                var newObj = JSON.parse(JSON.stringify(obj));

                var targetObj = classes[newObj.Inherit];

                while (targetObj) {
                    targetObj.Properties.forEach(function (item) {
                        // Only last implementation count
                        if (newObj.Properties.filter(function (itm) { return itm.Name === item.Name }).length == 0) {
                            newObj.Properties.push(item);
                        }
                    });

                    targetObj.Methods.forEach(function (item) {
                        newObj.Methods.push(item);
                    });

                    targetObj = classes[targetObj.Inherit];
                }

                return newObj;
            }

            function renderTables(obj) {
                var flattenObject = getFlattenInheritance(obj);

                var content = "";

                //content += "## " + obj.Name + newLine;

                content += "### Public Properties" + newLine;
                //content += "<span class='expandProperties' id='btnExpandProperties" + obj.Name + "'>▶ Show Inherited Public Properties</span>" + newLine;

                content += "<table class='autoDocsTable'>";
                content += "<thead>";
                content += "<tr><th colspan='2'>Property</th><th>Defined By</th></tr>";
                content += "</thead>";
                content += "<tbody>";

                flattenObject.Properties.forEach(function (element) {
                    //content += "<tr style='" + (element.DefinedBy != flattenObject.Name ? "display:none" : "") + "'>";
                    content += "<tr>";

                    content += "<td>" + (element.DefinedBy != flattenObject.Name ? "<span title='Inherited'>⤊</span>" : "") + "</td>";
                    content += "<td>" + element.Name + " : _" + element.ReturnType + "_<br/>" +
                        (element.ReadOnly ? "[read-only] " : "") +
                        element.ShortDesc + "</td>";
                    content += "<td>" + element.DefinedBy + "</td>";

                    content += "</tr>";
                });

                content += "</tbody>";
                content += "</table>" + newLine;

                content += "### Public Methods" + newLine;

                content += "<table class='autoDocsTable'>";
                content += "<thead>";
                content += "<tr><th colspan='2'>Method</th><th>Defined By</th></tr>";
                content += "</thead>";
                content += "<tbody>";

                flattenObject.Methods.forEach(function (element) {
                    content += "<tr>";

                    content += "<td>" + "" + "</td>";
                    content += "<td>" + element.Name;
                    content += "(";


                    content += element.Arguments.map(function (item) {
                        return item.Name + ":" + item.Type + (item.Default != null ? " = " + item.Default : "")
                    }).join(', ');


                    content += ")";
                    content += ":_" + element.ReturnType + "_<br/>" +
                        element.ShortDesc;

                    content += "</td>";
                    content += "<td>" + element.DefinedBy + "</td>";

                    content += "</tr>";
                });

                content += "</tbody>";
                content += "</table>" + newLine;



                content += "## Property Detail" + doubleNewLine;

                flattenObject.Properties.forEach(function (element) {

                    content += "### **" + element.Name + "** property" + doubleNewLine;

                    content += element.Name + " : " + element.ReturnType + doubleNewLine;
                    content += "**Read-Only :** " + element.ReadOnly + doubleNewLine;
                    content += "**Default :** " + element.Default + doubleNewLine;
                    content += element.LongDesc + doubleNewLine;
                    content += "----------" + doubleNewLine;
                });

                content += "## Method Detail" + doubleNewLine;

                flattenObject.Methods.forEach(function (element) {

                    content += "### **" + element.Name + "** method" + doubleNewLine;

                    content += element.Name + " : " + element.ReturnType + doubleNewLine;
                    content += "**Read-Only :** " + element.ReadOnly + doubleNewLine;
                    content += "**Default :** " + element.Default + doubleNewLine;
                    content += element.LongDesc + doubleNewLine;
                    content += "----------" + doubleNewLine;
                });


                return content;

            }

            var classes = {};
            var classesToLoad = [];

            var loadedCallback;
            var tempContent;
            var classesToLoadPos = 0;

            function loadNextClass() {
                if (classesToLoadPos >= classesToLoad.length) {
                    // Render
                    var matches = getAllMatches(regex.InsertTag, tempContent);

                    for (var i = 0; i < matches.length; i++) {
                        var match = matches[i];

                        tempContent = tempContent.replace(match[0], renderTables(classes[match[1]]))
                    }

                    loadedCallback(tempContent);
                    return
                }

                var currentClass = classesToLoad[classesToLoadPos];

                if (typeof classes[currentClass.Name] == "undefined") {
                    window.Docsify.get(currentClass.Url, true).then(function (content) {
                        var classDef = {}

                        classes[currentClass.Name] = classDef;

                        var parser = new DOMParser();
                        var xmlDoc = parser.parseFromString(content, "text/xml");

                        classDef.Name = getTagText(xmlDoc.firstChild, "Name");
                        classDef.Inherit = getTagText(xmlDoc.firstChild, "Inherit");

                        if (classDef.Inherit != null) {
                            var dataUrl = window.Docsify.util.getParentPath(document.location.href).replace(/#\//g, "") + classDef.Inherit + "_data.xml";

                            classesToLoad.push({ Name: classDef.Inherit, Url: dataUrl });
                        }


                        var properties = getByTagName(getByTagName(xmlDoc.firstChild, "Properties")[0], "Property");

                        classDef.Properties = [];

                        for (var i = 0; i < properties.length; i++) {
                            var property = properties[i];
                            var propertyObj = {};

                            propertyObj.Name = getTagText(property, "Name");
                            propertyObj.ReturnType = getTagText(property, "ReturnType");
                            propertyObj.ShortDesc = getTagText(property, "ShortDesc");
                            propertyObj.LongDesc = getTagText(property, "LongDesc");
                            propertyObj.ReadOnly = getTagText(property, "ReadOnly") == "true";
                            propertyObj.Default = getTagText(property, "Default");
                            propertyObj.DefinedBy = classDef.Name;

                            classDef.Properties.push(propertyObj);
                        }

                        var methods = getByTagName(getByTagName(xmlDoc.firstChild, "Methods")[0], "Method");

                        classDef.Methods = [];

                        for (var i = 0; i < methods.length; i++) {
                            var method = methods[i];
                            var methodObj = {};

                            methodObj.Name = getTagText(method, "Name");
                            methodObj.ReturnType = getTagText(method, "ReturnType");
                            methodObj.ShortDesc = getTagText(method, "ShortDesc");
                            methodObj.LongDesc = getTagText(method, "LongDesc");
                            methodObj.DefinedBy = classDef.Name;

                            var argumentsArr = getByTagName(getByTagName(method, "Arguments")[0], "Argument");

                            methodObj.Arguments = [];

                            for (var j = 0; j < argumentsArr.length; j++) {
                                var argument = argumentsArr[j];
                                var argumentObj = {};

                                argumentObj.Name = getTagText(argument, "Name");
                                argumentObj.Type = getTagText(argument, "Type");
                                argumentObj.ShortDesc = getTagText(argument, "ShortDesc");
                                argumentObj.Default = getTagText(argument, "Default");

                                methodObj.Arguments.push(argumentObj);
                            }

                            classDef.Methods.push(methodObj);
                        }

                        classesToLoadPos++;

                        loadNextClass();

                        return;
                    })
                }
                else {
                    loadNextClass();

                    return;
                }
            }

            var regex = {
                InsertTag: /<!-+\s+autoDocs:\s*?(.*)\s+-+>/g
            };

            function docsifyAutoDocs(hook, vm) {


                hook.beforeEach(function (content, next) {

                    if (regex.InsertTag.test(content)) {

                        classes = {};
                        classesToLoad = [];
                        classesToLoadPos = 0;
                        loadedCallback = next;

                        var matches = getAllMatches(regex.InsertTag, content);

                        for (var i = 0; i < matches.length; i++) {
                            var match = matches[i];

                            var dataUrl = window.Docsify.util.getParentPath(document.location.href).replace(/#\//g, "") + match[1] + "_data.xml";

                            classesToLoad.push({ Name: match[1], Url: dataUrl });
                        }

                        tempContent = content;


                        loadNextClass();

                    }
                    else {
                        next(content);
                    }
                })

            };


            window.$docsify = window.$docsify || {};
            window.$docsify.plugins = [docsifyAutoDocs].concat(window.$docsify.plugins || []);
        })();

    </script>
    <script src="https://unpkg.com/docsify/lib/docsify.js"></script>
    <script src="https://unpkg.com/docsify-themeable"></script>
    <script src="https://unpkg.com/docsify-copy-code"></script>

    <script src="https://unpkg.com/docsify-tabs"></script>

    <script src="https://unpkg.com/docsify/lib/plugins/search.js"></script>
</body>

</html>
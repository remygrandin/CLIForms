<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="CLIForms - Event driven CLI UI made simple">
    <title>CLIForms</title>

    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/vue.css"> -->
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/buble.css"> -->
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/dark.css"> -->
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/pure.css"> -->
    <link rel="stylesheet" href="https://unpkg.com/docsify-themeable/dist/css/theme-simple.css" title="Simple">
    <style>
        .expandProperties {
            cursor: pointer;
        }

        table.autoDocsTable {
            width: 100%;
            display: table;
        }

        table.autoDocsTable td:first-child,
        table.autoDocsTable th:first-child {
            width: 10px;
        }

        table.autoDocsTable td:last-child,
        table.autoDocsTable th:last-child {
            width: 25%;
        }
		
		table.autoDocsTable td>p,
        table.autoDocsTable th>p {
            margin-top:0;
			margin-bottom:0;
        }
		
    </style>
</head>

<body>
    <div id="app"></div>

    <!-- JavaScript -->
    <script>
        window.$docsify = {
            // GENERAL
            // -----------------------------------------------------------------
            name: 'CLIForms',
            homepage: 'index.md',
            loadSidebar: '_sidebar.md',

            // NAVIGATION
            // -----------------------------------------------------------------

            auto2top: true,
            maxLevel: 3,
            subMaxLevel: 3,

            // PLUGINS
            // -----------------------------------------------------------------
            executeScript: true,
            search: {
                depth: 1,
                noData: 'No results!',
                placeholder: 'Search...'
            },
            tabs: {
                // persist    : false,
                // sync       : false,
                // theme      : 'material',
                // tabComments: false,
                // tabHeadings: false
            }
		
        };
    </script>
    <script>


        (function () {
            "use strict";

            function getAllMatches(regex, text) {
                var res = [];
                text.replace(regex, function () {
                    var matches = arguments;
                    res.push(matches);
                });

                return res;
            }

            function getByTagName(parent, tagName) {
                var c = parent.childNodes;
                var x = [];
                for (var i = 0; i < c.length; i++) {
                    if (c[i].tagName === tagName) { // children_tag_name should be in capital, eg. "SPAN"
                        x.push(c[i]);
                    }
                };
                return x;
            }

            function getTagText(parent, tagName) {
                var childNodes = getByTagName(parent, tagName)[0].childNodes;
                if (childNodes.length == 0) {
                    return null;
                }
                else if (childNodes.length == 1) {
                    return childNodes[0].textContent;
                }
                else // CDATA
                {
                    return childNodes[1].textContent;
                }

            }

            var newLine = "\r\n";
            var doubleNewLine = newLine + newLine;

            function getFlattenInheritance(obj) {
                var newObj = JSON.parse(JSON.stringify(obj));

                var targetObj = classes[newObj.Inherit];

                while (targetObj) {
                    targetObj.Properties.forEach(function (item) {
                        // Only last implementation count
                        if (newObj.Properties.filter(function (itm) { return itm.Name === item.Name }).length == 0) {
                            newObj.Properties.push(item);
                        }
                    });

                    targetObj.Methods.forEach(function (item) {
                        newObj.Methods.push(item);
                    });

                    targetObj = classes[targetObj.Inherit];
                }

                // Sorting

                newObj.Properties.sort(function (a, b) {
                    return (a.Name).localeCompare(b.Name);
                });

                newObj.Methods.sort(function (a, b) {
                    if (a.Name != b.Name)
                        return (a.Name).localeCompare(b.Name);
                    else {
                        if (a.DefinedBy != b.DefinedBy) {
                            if (a.DefinedBy == newObj.Name)
                                return -1;
                            else if (b.DefinedBy == newObj.Name)
                                return 1;

                        }

                        if (a.Parameters.length == b.Parameters.length)
                            return 0;
                        else if (a.Parameters.length < b.Parameters.length)
                            return -1;
                        else
                            return 1;
                    }
                    return 0;
                });

                return newObj;
            }

            function renderTables(obj) {
                var flattenObject = getFlattenInheritance(obj);

                var content = "";

                //content += "## " + obj.Name + newLine;

                content += "### Public Properties" + newLine;
                //content += "<span class='expandProperties' id='btnExpandProperties" + obj.Name + "'>▶ Show Inherited Public Properties</span>" + newLine;

                content += "<table class='autoDocsTable'>";
                content += "<thead>";
                content += "<tr><th colspan='2'>Property</th><th>Defined By</th></tr>";
                content += "</thead>";
                content += "<tbody>";

                flattenObject.Properties.forEach(function (element) {
                    //content += "<tr style='" + (element.DefinedBy != flattenObject.Name ? "display:none" : "") + "'>";
                    content += "<tr>";

                    content += "<td>" + (element.DefinedBy != flattenObject.Name ? "<span title='Inherited'>▲</span>" : "") + "</td>";
                    content += "<td>";
					content += "<a href='" + classes[obj.Name].BaseURL + "?id=" + element.Name.toLowerCase() + "-property" + (element.DefinedBy != flattenObject.Name ? "-▲" : "") + "'>" + doubleNewLine;
					content += element.Name + "</a> : _" + element.ReturnType.replace(">", "&gt;").replace("<", "&lt;") + "_<br/>" +
                        (element.ReadOnly ? "[read-only] " : "") +
                        element.ShortDesc + "</td>";
                    content += "<td>" + doubleNewLine;
					content += "<a href='" + classes[element.DefinedBy].BaseURL + "?id=" + element.Name.toLowerCase() + "-property'>";
					content += element.DefinedBy;
					content += "</a>";
					content += "</td>";

                    content += "</tr>";
                });

                content += "</tbody>";
                content += "</table>" + doubleNewLine;

                content += "### Public Methods" + doubleNewLine;

                content += "<table class='autoDocsTable'>";
                content += "<thead>";
                content += "<tr>";
				content += "<th colspan='2'>Method</th>";
				content += "<th>Defined By</th></tr>";
                content += "</thead>";
                content += "<tbody>";

                flattenObject.Methods.forEach(function (element) {
                    content += "<tr>";

                    content += "<td>" + doubleNewLine;
					content += (element.DefinedBy != flattenObject.Name ? "<span title='Inherited'>▲</span>" : "") + "</td>";
                    content += "<td>" + doubleNewLine;
					content += element.Name;
                    content += "(";


                    content += element.Parameters.map(function (item) {
                        return item.Name + ":" + item.Type + (item.Default != null ? " = " + item.Default : "")
                    }).join(', ');


                    content += ")";
                    content += ":_" + element.ReturnType.replace(">", "&gt;").replace("<", "&lt;") + "_<br/>" +
                        element.ShortDesc;

                    content += "</td>";
                    content += "<td>" + element.DefinedBy + "</td>";

                    content += "</tr>";
                });

                content += "</tbody>";
                content += "</table>" + doubleNewLine;



                content += "## Property Detail" + doubleNewLine;

                flattenObject.Properties.forEach(function (element) {

                    content += "### **" + element.Name + "** <small>property</small> "  + (element.DefinedBy != flattenObject.Name ? "<span title='Inherited'>▲</span>" : "") + doubleNewLine;

                    content += element.Name + " : _" + element.ReturnType + "_" + doubleNewLine;

                    content += "<strong>Default :</strong> " + element.Default + " | <strong>Read-Only :</strong> " + element.ReadOnly + doubleNewLine;
                    content += element.LongDesc + doubleNewLine;
                    content += "----------" + doubleNewLine;
                });

                content += "## Method Detail" + doubleNewLine;

                flattenObject.Methods.forEach(function (element) {

                    content += "### **" + element.Name + "** <small>method</small> " + (element.DefinedBy != flattenObject.Name ? "<span title='Inherited'>▲</span>" : "") + doubleNewLine;

                    content += element.Name;
                    content += "(";


                    content += element.Parameters.map(function (item) {
                        return item.Name + ":" + item.Type + (item.Default != null ? " = " + item.Default : "")
                    }).join(', ');


                    content += ")" + " : _" + element.ReturnType + "_" + doubleNewLine;
                    content += element.LongDesc + doubleNewLine;

                    if (element.Parameters.length != 0) {
                        content += "#### **Parameters**" + doubleNewLine;

                        element.Parameters.forEach(function (Parameter) {
                            content += "";
                        });
                    }
                    content += "----------" + doubleNewLine;
                });


                return content;

            }

            var classes = {};
            var classesToLoad = [];

            var loadedCallback;
            var tempContent;
            var classesToLoadPos = 0;

            function loadNextClass() {
                if (classesToLoadPos >= classesToLoad.length) {
                    // Render
                    var matches = getAllMatches(regex.InsertTag, tempContent);

                    for (var i = 0; i < matches.length; i++) {
                        var match = matches[i];

                        tempContent = tempContent.replace(match[0], renderTables(classes[match[1]]))
                    }

                    loadedCallback(tempContent);
                    return tempContent
                }

                var currentClass = classesToLoad[classesToLoadPos];

                if (typeof classes[currentClass.Name] == "undefined") {
                    window.Docsify.get(currentClass.Url, true).then(function (content) {
                        var classDef = {}

                        classes[currentClass.Name] = classDef;

                        var parser = new DOMParser();
                        var xmlDoc = parser.parseFromString(content, "text/xml");

                        classDef.Name = getTagText(xmlDoc.firstChild, "Name");
                        classDef.Inherit = getTagText(xmlDoc.firstChild, "Inherit");
						classDef.BaseURL = window.Docsify.util.getParentPath(document.location.href) + classDef.Name

                        if (classDef.Inherit != null) {
                            var dataUrl = window.Docsify.util.getParentPath(document.location.href).replace(/#\//g, "") + classDef.Inherit + "_data.xml";

                            classesToLoad.push({ Name: classDef.Inherit, Url: dataUrl });
                        }


                        var properties = getByTagName(getByTagName(xmlDoc.firstChild, "Properties")[0], "Property");

                        classDef.Properties = [];

                        for (var i = 0; i < properties.length; i++) {
                            var property = properties[i];
                            var propertyObj = {};

                            propertyObj.Name = getTagText(property, "Name");
                            propertyObj.ReturnType = getTagText(property, "ReturnType");
                            propertyObj.ShortDesc = getTagText(property, "ShortDesc");
                            propertyObj.LongDesc = getTagText(property, "LongDesc");
                            propertyObj.ReadOnly = getTagText(property, "ReadOnly") == "true";
                            propertyObj.Default = getTagText(property, "Default");
                            propertyObj.DefinedBy = classDef.Name;

                            classDef.Properties.push(propertyObj);
                        }

                        var methods = getByTagName(getByTagName(xmlDoc.firstChild, "Methods")[0], "Method");

                        classDef.Methods = [];

                        for (var i = 0; i < methods.length; i++) {
                            var method = methods[i];
                            var methodObj = {};

                            methodObj.Name = getTagText(method, "Name");
                            methodObj.ReturnType = getTagText(method, "ReturnType");
                            methodObj.ShortDesc = getTagText(method, "ShortDesc");
                            methodObj.LongDesc = getTagText(method, "LongDesc");
                            methodObj.DefinedBy = classDef.Name;

                            var parameters = getByTagName(getByTagName(method, "Parameters")[0], "Parameter");

                            methodObj.Parameters = [];

                            for (var j = 0; j < parameters.length; j++) {
                                var parameter = parameters[j];
                                var parameterObj = {};

                                parameterObj.Name = getTagText(parameter, "Name");
                                parameterObj.Type = getTagText(parameter, "Type");
                                parameterObj.ShortDesc = getTagText(parameter, "ShortDesc");
                                parameterObj.Default = getTagText(parameter, "Default");

                                methodObj.Parameters.push(parameterObj);
                            }

                            classDef.Methods.push(methodObj);
                        }
						
						var events = getByTagName(getByTagName(xmlDoc.firstChild, "Events")[0], "Event");

                        classDef.Events = [];

                        for (var i = 0; i < events.length; i++) {
                            var event = events[i];
                            var eventObj = {};

                            eventObj.Name = getTagText(event, "Name");
                            eventObj.ReturnType = getTagText(event, "Type");
                            eventObj.ShortDesc = getTagText(event, "ShortDesc");
                            eventObj.LongDesc = getTagText(event, "LongDesc");

							var eventProperty = getByTagName(getByTagName(event, "Properties")[0], "Property");
							
							eventObj.Properties = [];

                            for (var j = 0; j < eventProperty.length; j++) {
                                var eventProperty = eventProperty[j];
                                var eventPropertyObj = {};

                                eventPropertyObj.Name = getTagText(eventProperty, "Name");
                                eventPropertyObj.Type = getTagText(eventProperty, "Type");
                                eventPropertyObj.ReadOnly = getTagText(eventProperty, "ReadOnly") == "true";
                                eventPropertyObj.Default = getTagText(eventProperty, "Default");
								eventPropertyObj.ShortDesc = getTagText(eventProperty, "ShortDesc");

                                eventObj.Properties.push(eventPropertyObj);
                            }

                            classDef.Events.push(eventObj);
                        }

                        classesToLoadPos++;

                        loadNextClass();

                        return;
                    })
                }
                else {
                    loadNextClass();

                    return;
                }
            }

            var regex = {
                InsertTag: /<!-+\s+autoDocs:\s*?(.*)\s+-+>/g
            };

            function docsifyAutoDocs(hook, vm) {


                hook.beforeEach(function (content, next) {

                    if (regex.InsertTag.test(content)) {

                        classes = {};
                        classesToLoad = [];
                        classesToLoadPos = 0;
                        loadedCallback = next;

                        var matches = getAllMatches(regex.InsertTag, content);

                        for (var i = 0; i < matches.length; i++) {
                            var match = matches[i];

                            var dataUrl = window.Docsify.util.getParentPath(document.location.href).replace(/#\//g, "") + match[1] + "_data.xml";

                            classesToLoad.push({ Name: match[1], Url: dataUrl });
                        }

                        tempContent = content;


                        loadNextClass();

                    }
                    else {
                        next(content);
                    }
                })

            };


            window.$docsify = window.$docsify || {};
            window.$docsify.plugins = [docsifyAutoDocs].concat(window.$docsify.plugins || []);
        })();

    </script>
    <script src="https://unpkg.com/docsify@4.8.0/lib/docsify.js"></script>
    <script src="https://unpkg.com/docsify-themeable"></script>
    <script src="https://unpkg.com/docsify-copy-code"></script>

    <script src="https://unpkg.com/docsify-tabs"></script>

    <script src="https://unpkg.com/docsify/lib/plugins/search.js"></script>
</body>

</html>